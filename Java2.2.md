#Java2


#T22
***
~~~Java
 package turtle;   

1   public class T22 {   

2     public static void main(String[] args){       

3      int x = 300, y = 200, d = 100;           //  int 型の変数を用意   

4      TurtleFrame f = new TurtleFrame(700,500);  //引数のあるコンストラクタ呼出し   

5      Turtle m = new Turtle(x,y,180);       

6      Turtle m1 = new Turtle(x+ d,y+ d,0);       

7      java.awt.Color c = new java.awt.Color(255,0,0);   // 赤色オブジェクトを生成   

8      m1.setColor(c);                         // m1 の色を赤色に指定   

9      f.add(m);                                    

10      f.add(m1);              
                    
11      m.fd(d);                        
          
12      m1.fd(d);                      
           
13      m.lt(90);              
                   
14      m1.lt(90);       
                         
15      d = d / 2;   //d の値を d/2 に変更        

16      m.fd(d);                                  

17       m1.fd(d);                                 

18       m1.moveTo(m);                             
    }   
}

~~~
***

##変数への代入
9行目以降はf,m,m1に対してメソッド呼び出しを行っている。
Javaの＝は等号ではなく、変数への代入記号であるので、途中15行目でdの値をd/2にするとこの行からdに代入されている値は50に変わる。同じことを書いてもその時の変数によって動きが変化する。
##メソッドの多重定義
最後の行、仕様ではmoveToというメソッドは３つあるが、m1というTurtle型の引数が１つなので起動されるのは2番目。
同じ名前で引数の数や型が異なるメソッドを複数持たせることを**メソッドの多重定義（オーバーロード）**という。多重定義を用いることで、同じメソッド名でもその処理の具体的な指定方法の違いは引数の数や型で指定することができるようになる。
##変数の活用
プログラムの保守を容易にするために、途中に現れる定数はできるだけ減らして、個々の値の間の論理的な依存関係を用いながら、プログラムを書くべき。
#T23
***
~~~Java
 package turtle;

1  public class T23 {

2    public static void main(String[] args){

3        int d = 100, x, y, a;

4        TurtleFrame f = new TurtleFrame(); 

5        Turtle m = new Turtle(200,300,0);  

6        f.add(m);                       

7        m.fd(d);                        

8        x  = m.getX();                // m のX 座標のとり出し

9       y = m.getY();                // m のY 座標のとり出し

10       a = m.getAngle() - 45;       // m の角度のとり出し

11       Turtle m1 = new Turtle(x, y, a); //m1 の生成

12       f.add(m1);              

13       m1.fd(d);

14       Turtle m2 = m.clone();       //m2 の生成

15       f.add(m2);                

16       m.rt(45);                        

17       m.fd(d);

18       m2.tcolor = new java.awt.Color(0,255,255); // m2 の亀の色を水色に変える

19       m2.tscale = m2.tscale * 4;  // m2 の亀を現在の 4 倍の大きさにする

20       m2.fd(d);               

21    }

22 }
~~~
***
##値を返すメソッド
メソッドは処理の結果得られた値を呼び出し元のプログラムに返すこともできる。  
Turtleの仕様も見てもわかるように、各メソッドの先頭にvoid,int,Turtleなど書かれている。   
この中でvoidは値を返さないことを示す特別な表記だが（void型のメソッドの呼び出し式は例外的に値を意味しない式）、それ以外はそれぞれのメソッドが返す値の型を意味している。   
オブジェクトや数といった値を示す表現のことを式と言ったが、m.getX()といったメソッド呼び出しも式であり、メソッドにより返される値を意味している。   
8行目のm.getX()はmのx座標を意味するint型の式。9，10行目も同様。
また、メソッドやコンストラクタの引数には式が書けるのだから、8～11行目はこう書いてもよい。
~~~
  Turtle m1 = new Turtle( m.getX(), m.getY(), m.getAngle()-45) ;
~~~
14行目、m.clone   
このメソッドは、仕様によると、自分と同じ状態のTurtleを新たに生成して返すことになっている。  
このように、メソッドはオブジェクトを生成することもオブジェクトを返すこともできる。
##インスタンス変数
Turtleの仕様を見ると、フィールドという項目があり、

~~~ 
java.awt.Color tcolor 
~~~
及び
~~~
double  tscale
~~~
とある。これは、Turtleにはtcolorとtscaleという名前の**インスタンス変数**(**インスタンスフィールド**ともいう)があって、それらの型がjava.awt.Color及びdoubleであるということを示している。   
**フィールド**は、インスタンスフィールド（インスタンス変数）と後述で扱うクラスフィールド（クラス変数）がある。ここではインスタンス変数とクラス変数と呼び、両者を総称するときフィールドという言葉を使う。

※後に述べるが、doubleというのは浮動小数点数（実数の近似値）を表すプリミティブ型である。   
※APIの仕様で、先頭に　static と書かれている withTurtleAll はクラス変数である。

　インスタンス変数はそれぞれのオブジェクトが持つ変数である。これまで扱ってきた変数（ローカル変数）と同じように、代入したり、変数の値を式として扱うこともできる。  
　違いは、これがオブジェクトごとに存在しており、オブジェクトの状態を表しているということである。

　インスタンス変数は、変数名だけではどのオブジェクトのものかわからないので、次のように、オブジェクトと変数名で指定する。
~~~
  |オブジェクト式|.|インスタンス変数名|
~~~
　18行目は新しく色オブジェクト（水色）を生成し、m2のインスタンス変数tcolorに代入している。また19行目はm2のインスタンス変数tscaleの値に対してその4倍を計算して再びm2のtscaleに代入している。   
　ここでm,m1の状態は、m2の状態を変えても、変化しないことに注意。インスタンス変数は個々のオブジェクトが個別に持っており、その値を変えても、ほかのオブジェクトに影響を与えない。

#オブジェクトとは
　まず、**「オブジェクトはインスタンス変数として状態を持つ」。**仕様に書かれたインスタンス変数の値はもちろん、それ以外にも様々な状態を持つ。たとえば、Turtleは、現在のx,y座標の向き、ペンの色、どのTurtleFrameの上に乗っているかといった状態を持つ。これらの状態もAPIの仕様として公開されていないだけで、Turtle及びTurtleFrameのインスタンス変数として実現されている。しかし、これらの変数をユーザのプログラムから直接変更されてはプログラムの動きがおかしくなるので、メソッドを通してのみアクセスできるようになっている。   
　次に、**「オブジェクトはインスタンスメソッドの呼び出しに応じて処理を実行する」。**メソッドの中でオブジェクトが行う処理は、大まかにいって２つある。   
　１つは、自分の状態を変えることである。たとえば、Turtleは座標を変えるメソッドの中で、インスタンス変数x,yの値を変化させる。   
　もう１つは、（自分自身含む）他のオブジェクトのメソッドを呼び出すことである。たとえば、Turtleが座標移動したあと、その軌跡が線として画面に残るが、これは、Turtleががメソッドの中で自分が乗っているTurtleFrameに対して、公開されていないメソッドを呼び出して新しい線分を追加するように依頼することで実現している。   
　もう１つの特徴は、**「オブジェクトは同一性という概念をもっている」。**たとえば、Turtleはメソッドが起動されて座標移動したり大きさが変わっても、内部状態が変わっただけで別のオブジェクトにはならない。   
　一方、数の世界に同一性の概念は入りにくい。また、オブジェクトとメソッド呼び出しによる計算は実行が遅くなるので、足し算などの頻繁に行う計算は、その枠組み以外のものとして提供した方が効率がいい。よってそのような理由でJavaでは、数、文字、論理値などはオブジェクト以外のものとして扱い、このような値を**プリミティブ値**と呼んでいる。(どうしてもプリミティブ値をオブジェクトとみなしたいときはラッパークラスを用いる。（後述）)
#クラス変数とクラスメソッド

　
